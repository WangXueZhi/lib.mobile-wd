{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./components/pull-to-refresh/PullToRefresh.tsx","webpack:///./components/pull-to-refresh/style/index.scss","webpack:///external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}"],"names":["PullToRefreshProps","prefixCls","refreshing","distance","height","document","documentElement","clientHeight","PullToRefresh","props","wrap","addPullListenEvent","startY","overscroll","el","addEventListener","evt","top","scrollTop","totalScroll","scrollHeight","currentScroll","offsetHeight","state","doing","setState","touches","pageY","preventDefault","translateY","overMinDistance","step","text","refresh","transform","children","nextProps","prevState","React","defaultProps"],"mappings":"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","file":"pull-to-refresh/index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"react\")) : factory(root[\"React\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE_react__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./components/pull-to-refresh/PullToRefresh.tsx\");\n","import * as React from 'react';\nimport './style/index.scss';\nexport class PullToRefreshProps {\n    constructor() {\n        /**\n         * 样式前缀\n         * @ignore\n         * @default 'x-pull-to-refresh'\n         */\n        this.prefixCls = 'x-pull-to-refresh';\n        /**\n         * 是否显示刷新状态\n         */\n        this.refreshing = false;\n        /**\n         * 触发刷新最小下拉距离\n         */\n        this.distance = 100;\n        /**\n         * 容器高度，默认高度为浏览器高度即document.documentElement.clientHeight\n         */\n        this.height = document.documentElement.clientHeight;\n    }\n}\n/**\n * @author wdong\n * @version 0.0.1\n */\nexport default class PullToRefresh extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.wrap = null;\n        //添加滑动事件监听\n        this.addPullListenEvent = () => {\n            let startY = 0;\n            let distance = 0;\n            const overscroll = (el) => {\n                el.addEventListener('touchstart', (evt) => {\n                    let top = el.scrollTop;\n                    let totalScroll = el.scrollHeight;\n                    let currentScroll = top + el.offsetHeight;\n                    if (!this.state.doing) {\n                        this.setState({\n                            doing: true\n                        });\n                    }\n                    if (top === 0) {\n                        el.scrollTop = 1;\n                    }\n                    else if (currentScroll === totalScroll) {\n                        el.scrollTop = top - 1;\n                    }\n                    startY = evt.touches[0].pageY;\n                });\n                el.addEventListener('touchmove', (evt) => {\n                    distance = evt.touches[0].pageY - startY;\n                    if (distance > 0 && el.scrollTop <= 0) {\n                        // evt.stopPropagation();\n                        evt.preventDefault();\n                    }\n                    else {\n                        return;\n                    }\n                    this.setState({\n                        translateY: distance - 50\n                    });\n                    if (distance >= this.props.distance) {\n                        this.setState({\n                            overMinDistance: true,\n                            step: 1,\n                            text: \"松开立即刷新\"\n                        });\n                    }\n                });\n                el.addEventListener('touchend', (evt) => {\n                    if (distance > 0 && el.scrollTop <= 0) {\n                        evt.preventDefault();\n                    }\n                    else {\n                        return;\n                    }\n                    if (distance >= this.props.distance) {\n                        this.props.refresh && this.props.refresh();\n                        this.setState({\n                            step: 2,\n                            translateY: 0,\n                            overMinDistance: true\n                        });\n                    }\n                    else {\n                        this.setState({\n                            step: 0,\n                            text: \"下拉可以刷新\",\n                            translateY: -50,\n                            overMinDistance: false,\n                            doing: false\n                        });\n                    }\n                });\n            };\n            if (!this.state.doing) {\n                overscroll(this.wrap);\n            }\n        };\n        this.state = {\n            text: \"下拉可以刷新\",\n            step: 0,\n            translateY: -50,\n            overMinDistance: false,\n            doing: false //是否处于操作状态\n        };\n    }\n    componentDidMount() {\n        this.addPullListenEvent();\n    }\n    static getDerivedStateFromProps(nextProps, prevState) {\n        if (!nextProps.refreshing && prevState.step == 2) {\n            //刷新完成\n            return {\n                step: 0,\n                text: \"下拉可以刷新\",\n                translateY: -50,\n                doing: false\n            };\n        }\n        return null;\n    }\n    render() {\n        const { prefixCls, height } = this.props;\n        const { step, translateY, text, overMinDistance } = this.state;\n        return (<div className={prefixCls} style={{ height: height }} ref={wrap => this.wrap = wrap}>\n        <div className={step == 2 || (step == 0 && translateY == -50) ? `${prefixCls}-back` : \"\"} style={{ transform: `translateY(${translateY}px)` }}>\n          <div className={step == 2 ? `${prefixCls}-main ${prefixCls}-doing` : `${prefixCls}-main`}>\n            {overMinDistance && (step == 2 || (step == 0 && translateY == -50)) ? <div className={`${prefixCls}-text`}><i className={`${prefixCls}-loading`}></i></div> : <div className={`${prefixCls}-text`}>{text}</div>}\n            {this.props.children}\n          </div>\n        </div>\n      </div>);\n    }\n}\nPullToRefresh.defaultProps = new PullToRefreshProps();\n","// extracted by mini-css-extract-plugin","module.exports = __WEBPACK_EXTERNAL_MODULE_react__;"],"sourceRoot":""}